{% extends 'base.html' %}
{% block title %}Marcas de materiales{% endblock %}
{% block content %}
  <div class="actions" style="margin-bottom:10px;">
    <a class="button" href="{{ url_for('marcas_materiales_nuevo') }}">+ Nueva marca</a>
  </div>
  <h2>Marcas de materiales</h2>

  <form method="get" action="{{ url_for('marcas_materiales_index') }}" style="margin-bottom:20px; padding:15px; background:#f7f7f7; border-radius:6px;">
    <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap:10px; align-items:end;">
      <div>
        <label style="display:block; margin-bottom:6px; font-weight:600;">Buscar:</label>
        <input type="text" name="q" value="{{ busqueda }}" placeholder="Nombre de marca" style="width:100%; padding:6px;">
      </div>
      <div>
        <label style="display:block; margin-bottom:6px; font-weight:600;">Estado:</label>
        <select name="activo" style="width:100%; padding:6px; height:34px;">
          <option value="">Todas</option>
          <option value="true" {% if activo_filtro == 'true' %}selected{% endif %}>Activas</option>
          <option value="false" {% if activo_filtro == 'false' %}selected{% endif %}>Inactivas</option>
        </select>
      </div>
      <div style="display:flex; gap:10px;">
        <button type="submit" class="button">Buscar</button>
        <a href="{{ url_for('marcas_materiales_index') }}" class="button button-secondary">Limpiar</a>
      </div>
    </div>
  </form>

  {% if marcas %}
    <table>
      <tr>
        <th style="width:25%;">Nombre</th>
        <th style="width:20%;">Fabricante</th>
        <th style="width:15%;">País</th>
        <th style="width:15%;">Estado</th>
        <th style="width:25%;">Acciones</th>
      </tr>
      {% for marca in marcas %}
        <tr>
          <td><strong>{{ marca.nombre }}</strong><br><small style="color:#666;">{{ marca.descripcion or '-' }}</small></td>
          <td>{{ marca.fabricante or '-' }}</td>
          <td>{{ marca.pais_origen or '-' }}</td>
          <td>
            {% if marca.activo %}
              <span style="padding:3px 8px; background:#d4edda; color:#155724; border-radius:4px; font-size:0.85em;">Activa</span>
            {% else %}
              <span style="padding:3px 8px; background:#f8d7da; color:#721c24; border-radius:4px; font-size:0.85em;">Inactiva</span>
            {% endif %}
          </td>
          <td style="white-space:nowrap;">
            <a href="{{ url_for('marcas_materiales_editar', id=marca.id) }}" class="button" style="padding:4px 8px; font-size:0.85em;">Editar</a>
            <form method="post" action="{{ url_for('marcas_materiales_eliminar', id=marca.id) }}" style="display:inline;">
              <button type="submit" class="button button-secondary" style="padding:4px 8px; font-size:0.85em; background:#dc3545;" onclick="return confirm('¿Eliminar esta marca?')">Eliminar</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <p>No hay marcas registradas.</p>
  {% endif %}
{% endblock %}

